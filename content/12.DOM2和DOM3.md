
### DOM2和DOM3

> DOM2和DOM3的变化
> 操作样式的DOM API
> DOM遍历与范围
> DOM1主要定义HTML和XML文档底层结构，DOM2和3则在基础上引入更多交互能力

#### 12.1 DOM变化
DOM2和3的目的在于扩展API，满足操作XML新需求，提供更好的错误处理、特性检测能力
**12.1.1 针对XML命名空间的变化**
空间命名使用xmlns特性指定，任何格式良好的XHTML中，都应包含在<html>元素中
```
<html xmlns="http://www.w3.org/1999/xhtml">
</html>
```
1. Node类型的变化
包含下列特定于命名空间的属性
- localName: 不带命名空间的属性
- namespaceURI: 命名空间URI或者null（未指定情况下）
- prefix: 命名空间前缀或者null
DOM3引入有关的方法：
- isDefaultNamespace(namespaceURI) 指定namespaceURI是当前节点的默认命名空间情况下是true
- lookupNamespaceURI(prefix) 返回给定prefix命名空间
- lookupPrefix(namespaceURI) 返回给定namespaceURI的前缀
2. Document类型的变化
- createElementNS(namespaceURI, tagName)
- createAttributeNS(namespaceURI, attributeName)
- getElementByTagNameNS(namespaceURI, tagName)
3. Element类型的变化
- getAttributeNS(namespaceURI, localName)
- getAttributeNodeNS(namespaceURI, localName)
- getElementByTagNameNS(namespaceURI, tagName)
- hasAttributeNS(namespaceURI, localName)
- removeAttributeNS(namespaceURI, localName)
- setAttributeNS(namespaceURI, localName)
- setAttributeNodeNS(attNode)
4. NameNodeMap类型的变化
- getNamedItemNS(namespaceURI, localName)
- removeNamedItemNS(namespaceURI, localName)
- setNamedItemNS(node)
**12.1.2 其他方面的变化**
1. DocumentType类型的变化
- publicId
- systemId
- internalSubset
2. Document类型的变化
- 与命名空间无关：importNode方法，用于从一个文档获取一个节点然后插入另一个节点
- document.implementation.createHTMLDocument("New Doc")用于创建一个新的HTML文档
3. Node类型的变化
DOM3级引入两个辅助比较节点的方法，方法比较传入节点和引用节点是同一个对象
- isSameNode
- isEqualNode
setUserData方法将数据指定给节点
getUserData方法传入对应的可以获取该数据
4. 框架的变化
contentDocument属性包含一个指针，用于指向框架内容的文档对象
```
var iframe = document.getElementById("myIframe");
var iframeDoc = iframe.contentDocument;
```

#### 12.2 样式
**12.2.1 访问元素的样式**
支持style的HTML都有一个对应的style属性，包含着通过HTML的style指定的所有样式信息
但不包含外部样式表或嵌入样式表经过层叠而来的样式，对应的短划线样式名称需要转成驼峰式才能通过js访问
background => style.backgroundStyle
color => style.color
font-family => style.fontFamily
```
myDiv.style.width = '100px';
```
1.DOM样式属性和方法（style对象的一些属性和方法）
- cssText   CSS代码
- length   CSS属性数量
- item(index) 获取对应位置的CSS属性名
- setProperty (propertyName, value, priority)    设置属性值
- getPropertyValue (propertyName)   返回给定属性字符串值
- removeProperty (propertyName)   删除样式表中的给定属性
```
var prop, value, i, len;
for (i = 0, len = myDiv.style.length; i < len; i++) {
  prop = myDiv.style[i];     // 或者myDiv.style.item(i)
  value = myDiv.style.getPropertyValue(prop);
  alert(prop + " : " + value);
}
```